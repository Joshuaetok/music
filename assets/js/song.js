let phpValuesElement=document.getElementById("phpValues");let initialV=parseInt(phpValuesElement.getAttribute("data-initial-views"));let initialD=parseInt(phpValuesElement.getAttribute("data-initial-downloads"));let currSongId=parseInt(phpValuesElement.getAttribute("data-current-song-id"));let viewUpCount=0;let downloadUpCount=0;let viewsCounterElement=document.getElementById("viewsCount");let downloadsCounterElement=document.getElementById("downloadsCount");viewsCounterElement.innerText="Streams: "+viewUpCount;downloadsCounterElement.innerText="Downloads: "+downloadUpCount;let viewsIsInView=false;downloadsIsInView=false;window.addEventListener("scroll",function(){if(isScrolledIntoView(viewsCounterElement)&&!viewsIsInView&&initialV!=0){viewsIsInView=true;startViewsCounting()}});window.addEventListener("scroll",function(){if(isScrolledIntoView(downloadsCounterElement)&&!downloadsIsInView&&initialD!=0){downloadsIsInView=true;startDownloadsCounting()}});function isScrolledIntoView(el){const rect=el.getBoundingClientRect();const elemTop=rect.top;const elemBottom=rect.bottom;return elemTop>=0&&elemBottom<=window.innerHeight}function startViewsCounting(){const viewInterval=setInterval(function(){viewUpCount++;viewsCounterElement.textContent="Streams: "+viewUpCount.toLocaleString();if(viewUpCount===initialV){clearInterval(viewInterval)}},10)}function startDownloadsCounting(){const downloadInterval=setInterval(function(){downloadUpCount++;downloadsCounterElement.textContent="Downloads: "+downloadUpCount.toLocaleString();if(downloadUpCount===initialD){clearInterval(downloadInterval)}},10)}function updateViewCount(){var randomIncrement=Math.floor(Math.random()*5)+2;var viewsElement=document.getElementById("viewsCount");var currentViews=parseInt(viewsElement.innerText.split(":")[1].trim().replace(/,/g,""));var updatedViews=currentViews+randomIncrement;viewsElement.innerText="Streams: "+updatedViews.toLocaleString();updateCountOnServer("views",randomIncrement)}function updateDownloadCount(){var randomIncrement=Math.floor(Math.random()*3)+8;var downloadsElement=document.getElementById("downloadsCount");var currentDownloads=parseInt(downloadsElement.innerText.split(":")[1].trim().replace(/,/g,""));var updatedDownloads=currentDownloads+randomIncrement;downloadsElement.innerText="Downloads: "+updatedDownloads.toLocaleString();updateCountOnServer("downloads",randomIncrement)}setInterval(updateViewCount,6e4);setInterval(updateDownloadCount,12e4);function updateCountOnServer(type,increment){$.ajax({type:"POST",url:"",data:{id:currSongId,type:type,increment:increment},success:function(response){},error:function(error){}})}